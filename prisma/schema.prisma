// Schema Prisma minimal para o bot
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Guilds {
  id       String  @id
  name     String
  iconURL  String?
  bannerURL String?
}

model Users {
  id       String  @id
  username String
  points   Int     @default(0)
}

model Settings {
  id                      String  @id
  ownerId                 String?
  staffChannelId          String?
  ticketChannelId         String?
  announcesChannelId      String?
  suggestionsChannelId    String?
  modRoleId               String?
  ticketCategoryId        String?
  ticketLogsChannelId     String?
  ticketRoleId            String?
  ticketTitle             String?
  ticketButtonName        String?
  ticketDescription       String?
}

model TicketCategories {
  id          String @id
  guildId     String
  name        String
  emoji       String?
  description String?
  color       String? @default("#2f3136")
  isActive    Boolean @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@unique([guildId, name])
}

model TicketCounters {
  id          String @id
  guildId     String
  counter     Int @default(0)
  updatedAt   DateTime @updatedAt
  
  @@unique([guildId])
}

model Tickets {
  id          String @id
  guildId     String
  categoryId  String
  userId      String
  channelId   String
  status      String @default("open")
  ticketNumber Int
  claimedBy   String? // ID do usu√°rio que fez claim
  claimedAt   DateTime?
  createdAt   DateTime @default(now())
  closedAt    DateTime?
  
  @@unique([guildId, categoryId, ticketNumber])
}
